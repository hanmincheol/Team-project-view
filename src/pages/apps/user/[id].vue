<script setup>
import ShareProjectDialogTemp from '@/components/dialogs/ShareProjectDialogTemp.vue';
import pricingtest from '@/components/dialogs/pricingtest.vue';
import chat from '@/pages/apps/challengeChat.vue';
import { useUserListStore } from '@/views/apps/user/useUserListStore';
import UserProfileForChellenge from '@/views/apps/user/view/UserProfileForChellenge.vue';
import AppDateTimePicker from '@core/components/app-form-elements/AppDateTimePicker.vue';
import { getBarChartConfig } from '@core/libs/apex-chart/apexCharConfig'; //Ï∞®Ìä∏ Î∂àÎü¨Ïò§Í∏∞
import VueApexCharts from 'vue3-apexcharts'; //Ï∞®Ìä∏ Î∂àÎü¨Ïò§Í∏∞
import { useTheme } from 'vuetify'; //Ï∞®Ìä∏ Î∂àÎü¨Ïò§Í∏∞

const isShareProjectDialogVisible = ref(false)
const userListStore = useUserListStore()
const route = useRoute() //routeÍ∞ùÏ≤¥
const userData = ref()
const userTab = ref(null)

//Ï∞®Ìä∏ Î∂àÎü¨Ïò§Í∏∞ Ïö©

const vuetifyTheme = useTheme()

const horizontalBarChartConfig = computed(() => getBarChartConfig(vuetifyTheme.current.value))
console.log('test:',vuetifyTheme.current.value);
const series = [{ data: [200] }]

//Ï∞®Ìä∏ Î∂àÎü¨Ïò§Í∏∞ Ïö© end

userListStore.fetchUser(Number(route.params.id)).then(response => {
  userData.value = response.data
})

//Ï∞∏Ïó¨ÎπÑ Î≥ÄÏàò
const pay = ref("10000")
</script>

<template>
  <div>
    <VRow class="match-height">
      <VCol cols="12" md="7"> <!--Ï†ÑÏ≤¥ ÌôîÎ©¥Ïùò ÏôºÏ™Ω-->
        <VCard>
          <VRow> <!--Ï±åÎ¶∞ÏßÄ Ï∞∏Ïó¨Ïù∏Ïõê Ï†ÑÏ≤¥-->
            <VRow :style="{'margin':'50px 0','width': '100%', 'display':'flex', 'justify-content': 'space-around'}"> <!--Ï∞∏Ïó¨Ïù∏Ïõê Î™©Î°ù ÏòÅÏó≠-->
              <VCard > <!--ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ-->
                <VCardItem>
                  <VCardTitle>
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
              <VCard>
                <VCardItem>
                  <VCardTitle class="text-md-h5">
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
              <VCard>
                <VCardItem>
                  <VCardTitle class="text-md-h5">
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
              <VCard>
                <VCardItem>
                  <VCardTitle class="text-md-h5">
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
            </VRow>
            <VRow :style="{'margin':'auto 0','margin-bottom':'60px', 'width': '100%', 'display':'flex', 'justify-content': 'space-around'}"> <!--Ï∞∏Ïó¨Ïù∏Ïõê Î™©Î°ù ÏòÅÏó≠-->
              <VCard> <!--ÌîÑÎ°úÌïÑ ÏÇ¨ÏßÑ-->
                <VCardItem>
                  <VCardTitle>
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
              <VCard>
                <VCardItem>
                  <VCardTitle class="text-md-h5">
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
              <VCard>
                <VCardItem>
                  <VCardTitle class="text-md-h5">
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
              <VCard>
                <VCardItem>
                  <VCardTitle class="text-md-h5">
                    <UserProfileForChellenge :user-data="userData" />
                  </VCardTitle>
                </VCardItem>
              </VCard>
            </VRow> <!--Ï∞∏Ïó¨Ïù∏Ïõê Î™©Î°ù ÏòÅÏó≠ end-->
          </VRow> <!--Ï±åÎ¶∞ÏßÄ Ï∞∏Ïó¨Ïù∏Ïõê Ï†ÑÏ≤¥ end-->
          <Vrow :style="{'margin-top':'100px'}"> <!--ÎåìÍ∏Ä ÏòÅÏó≠-->
            <chat />
          </Vrow>
        </VCard>
      </VCol> <!--Ï†ÑÏ≤¥ ÌôîÎ©¥Ïùò ÏôºÏ™Ω end-->
      <VCol cols="12" md="5"> <!--Ï†ÑÏ≤¥ ÌôîÎ©¥Ïùò Ïò§Î•∏Ï™Ω-->
        <VCard>
          <VRow :style="{'display':'flex', 'justify-content': 'space-around'}"> <!--Í≤ΩÍ≥†Ï∞Ω-->
            <VCard :style="{'width':'90%', 'margin-top':'50px'}">
              <VRow :style="{'padding':'5px', 'margin-top':'5px', 'margin-left':'5px'}">
                <VCardText class="float-left"><h3>Ï∞∏Ïó¨ÎπÑ {{pay}}Ïõê</h3></VCardText>
              </VRow>
              <VCol class="d-flex">
                <VCardText>‚ö†Ô∏è Ï±åÎ¶∞ÏßÄ ÌïòÎ£® Ï†Ñ ÏûêÎèô Í≤∞Ï†úÎê©ÎãàÎã§</VCardText>
                <pricingtest :pay="parseInt(pay)"/>
              </VCol>
            </VCard>
          </VRow> <!--Í≤ΩÍ≥†Ï∞Ω end-->
          <VRow :style="{'display':'flex', 'justify-content': 'space-around'}"> <!--Î™©ÌëúÍ¥ÄÎ†® Ï†ïÎ≥¥ end-->
            <VCard :style="{'width':'90%', 'margin-top':'30px'}">
              <VCardItem class="d-flex flex-wrap justify-space-between gap-4">
                <VCardText><h6 class="text-h6">üìå Ïö¥ÎèôÎüâ 80% Îã¨ÏÑ±ÌïòÍ∏∞</h6></VCardText>
                <hr :style="{'width':'500px'}" />
                <template #append>
                  <div class="date-picker-wrapper" :style="{'padding-bottom':'50px', 'padding-top':'30px'}">
                    Î™©ÌëúÍ∏∞Ìïú
                    <AppDateTimePicker
                      model-value="2022-06-09"
                      prepend-inner-icon="mdi-calendar-blank-outline"
                      density="compact"
                      :config="{ position: 'auto right' }"
                      :style="{'width':'300px'}"
                    />
                  </div>
                </template>
              </VCardItem>
            </VCard>
            <VCard :style="{'width':'90%', 'margin-top':'30px'}">
              <VueApexCharts
                type="bar"
                height="200"
                :options="horizontalBarChartConfig"
                :series="series"
              />
            </VCard>
            <div :style="{'margin-top':'50px','display':'flex', 'width':'90%', 'justify-content':'flex-end'}">
              <v-btn @click="isShareProjectDialogVisible = !isShareProjectDialogVisible">Invite</v-btn>
              <ShareProjectDialogTemp v-model:isDialogVisible="isShareProjectDialogVisible"/>
              <v-btn :style="{'margin-left':'10px'}">Exit</v-btn>
            </div>
            <!-- <VCard> Ï≤´Î≤àÏß∏ ÏãúÎèÑ
              <VCardItem class="d-flex flex-wrap justify-space-between gap-4">
                <template #append>
                  <div class="date-picker-wrapper">
                    <AppDateTimePicker
                      model-value="2022-06-09"
                      prepend-inner-icon="mdi-calendar-blank-outline"
                      density="compact"
                      :config="{ position: 'auto right' }"
                    />
                  </div>
                </template>
              </VCardItem>

              <VCardText>
                <ApexChartHorizontalBar />
              </VCardText>
            </VCard> -->
          </VRow> <!--Î™©ÌëúÍ¥ÄÎ†® Ï†ïÎ≥¥ end-->
          <VRow> <!--Î≤ÑÌäº-->
          </VRow> <!--Î≤ÑÌäº end-->
        </VCard>
      </VCol><!--Ï†ÑÏ≤¥ ÌôîÎ©¥Ïùò Ïò§Î•∏Ï™Ω end-->
    </VRow>
  </div>
</template>

<style lang="scss">
  .card-list {
    --v-card-list-gap: 0.75rem;
  }
</style>
